# NXZip æŠ€è¡“ä»•æ§˜æ›¸

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
```
NEXUSçµ±åˆã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œå‡ºå™¨
â”œâ”€â”€ é©å¿œçš„æˆ¦ç•¥é¸æŠå™¨
â”œâ”€â”€ åˆ¶ç´„é™¤å»å‰å‡¦ç†å™¨
â”œâ”€â”€ å¤šæ®µéšåœ§ç¸®å™¨
â”œâ”€â”€ SPEæš—å·åŒ–ã‚¨ãƒ³ã‚¸ãƒ³
â””â”€â”€ NXZãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
```

## ğŸ”¬ æ ¸å¿ƒæŠ€è¡“

### 1. åˆ¶ç´„é™¤å»æˆ¦ç•¥

#### AV1åˆ¶ç´„é™¤å»
- **å¾“æ¥ã®åˆ¶ç´„**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å†ç”Ÿäº’æ›æ€§
- **é™¤å»åŠ¹æœ**: å†—é•·æ€§é™¤å»ã®æ¿€åŒ–
- **å®Ÿè£…**: æ™‚é–“åˆ¶ç´„ç„¡è¦–ã®æœ€é©åŒ–

#### SRLAåˆ¶ç´„é™¤å»  
- **å¾“æ¥ã®åˆ¶ç´„**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ
- **é™¤å»åŠ¹æœ**: æ™‚é–“è»¸å…¨ä½“æœ€é©åŒ–
- **å®Ÿè£…**: ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºç„¡åˆ¶é™

#### AVIFåˆ¶ç´„é™¤å»
- **å¾“æ¥ã®åˆ¶ç´„**: éƒ¨åˆ†ãƒ‡ã‚³ãƒ¼ãƒ‰å¯¾å¿œ
- **é™¤å»åŠ¹æœ**: æ·±ã„æ§‹é€ åˆ†æ
- **å®Ÿè£…**: å…¨ä½“æ§‹é€ æœ€é©åŒ–

### 2. NEXUSçµ±åˆã‚¨ãƒ³ã‚¸ãƒ³

#### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œå‡º
```python
def _detect_format(self, data: bytes) -> str:
    # ãƒã‚¤ãƒŠãƒªã‚·ã‚°ãƒãƒãƒ£è§£æ
    # å‹•ç”»: ftyp, RIFF, matroska
    # éŸ³å£°: ID3, WAVE, MP3
    # ç”»åƒ: JPEG, PNG, GIF
    # ãƒ†ã‚­ã‚¹ãƒˆ: UTF-8è§£æã€æ–‡å­—æ¯”ç‡
```

#### é©å¿œçš„æˆ¦ç•¥
- **50MBè¶…**: é€Ÿåº¦å„ªå…ˆï¼ˆpreset=1ï¼‰
- **10-50MB**: ãƒãƒ©ãƒ³ã‚¹ï¼ˆpreset=3ï¼‰
- **10MBä»¥ä¸‹**: åœ§ç¸®ç‡å„ªå…ˆï¼ˆpreset=6-9ï¼‰

#### å¤šæ®µéšåœ§ç¸®
```python
# ãƒ†ã‚­ã‚¹ãƒˆç‰¹åŒ–
stage1 = lzma.compress(data, preset=preset)
stage2 = bz2.compress(stage1, compresslevel=9)

# ä¸¦åˆ—å‡¦ç†
chunks = split_data(data, cpu_count)
compressed_chunks = parallel_compress(chunks)
```

### 3. SPEæš—å·åŒ–

#### æ§‹é€ ä¿æŒæš—å·åŒ–
- **ç‰¹å¾´**: ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ç¶­æŒ
- **æ€§èƒ½**: 300-400MB/så‡¦ç†é€Ÿåº¦
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: AES-GCMç›¸å½“

## ğŸ“Š æ€§èƒ½åˆ†æ

### ç¾åœ¨ã®å®Ÿç¸¾

| ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ | åœ§ç¸®ç‡ | åœ§ç¸®é€Ÿåº¦ | å±•é–‹é€Ÿåº¦ | ç›®æ¨™é”æˆåº¦ |
|-------------|--------|----------|----------|-----------|
| ãƒ†ã‚­ã‚¹ãƒˆ | 91.3% | 164.4 MB/s | 699.4 MB/s | âœ…âœ…âœ… |
| å‹•ç”» | 18.3% | 26.9 MB/s | 108.2 MB/s | âš ï¸âš ï¸âš ï¸ |
| ç”»åƒ | 3.1% | 3.4 MB/s | 18.4 MB/s | âš ï¸âš ï¸âš ï¸ |
| éŸ³å£° | 1.2% | 4.1 MB/s | 18.1 MB/s | âš ï¸âš ï¸âš ï¸ |

### ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æ

#### ãƒ†ã‚­ã‚¹ãƒˆæˆåŠŸè¦å› 
1. **å¤šæ®µéšåœ§ç¸®**: LZMA + BZ2ã®çµ„ã¿åˆã‚ã›
2. **å‰å‡¦ç†æœ€é©åŒ–**: æ”¹è¡Œçµ±ä¸€ã€ç©ºç™½æœ€é©åŒ–
3. **é«˜ã„ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼**: ãƒ†ã‚­ã‚¹ãƒˆã®å†—é•·æ€§

#### ãƒ¡ãƒ‡ã‚£ã‚¢èª²é¡Œ
1. **æ—¢åœ§ç¸®ãƒ‡ãƒ¼ã‚¿**: æ—¢ã«æœ€é©åŒ–æ¸ˆã¿
2. **åˆ¶ç´„é™¤å»ä¸ååˆ†**: ã‚ˆã‚Šæ·±ã„é™¤å»ãŒå¿…è¦
3. **å°‚ç”¨å‰å‡¦ç†ä¸è¶³**: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç‰¹åŒ–å‡¦ç†

## ğŸ”§ å®Ÿè£…è©³ç´°

### NXZãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

#### ãƒ˜ãƒƒãƒ€ãƒ¼æ§‹é€ ï¼ˆ48ãƒã‚¤ãƒˆï¼‰
```
Offset | Size | Description
-------|------|------------
0-3    | 4    | Magic: "NXZU"
4-7    | 4    | Version
8-15   | 8    | Original Size
16-23  | 8    | Compressed Size  
24-31  | 8    | Encrypted Size
32-39  | 8    | Format Type
40-47  | 8    | Strategy
```

#### ãƒ‡ãƒ¼ã‚¿éƒ¨
```
Header(48) + SPE_Encrypted_Data(Variable)
```

### åœ§ç¸®ãƒ•ãƒ­ãƒ¼

```python
def compress(self, data: bytes) -> bytes:
    # 1. ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œå‡º
    format_type = self._detect_format(data)
    
    # 2. æˆ¦ç•¥é¸æŠ
    strategy = self._select_strategy(len(data))
    
    # 3. å‰å‡¦ç†
    processed = self._preprocess(data, format_type)
    
    # 4. åœ§ç¸®
    compressed = self._compress_data(processed, strategy)
    
    # 5. SPEæš—å·åŒ–
    encrypted = self.spe.apply_transform(compressed)
    
    # 6. ãƒ˜ãƒƒãƒ€ãƒ¼ä½œæˆ
    header = self._create_header(...)
    
    return header + encrypted
```

## ğŸ¯ æœ€é©åŒ–æˆ¦ç•¥

### çŸ­æœŸç›®æ¨™ï¼ˆæ¬¡å›é–‹ç™ºï¼‰

#### ãƒ¡ãƒ‡ã‚£ã‚¢åœ§ç¸®å¼·åŒ–
1. **æ·±å±¤åˆ¶ç´„é™¤å»**: 
   - DCTä¿‚æ•°å†é…ç½®
   - å‹•ããƒ™ã‚¯ãƒˆãƒ«æœ€é©åŒ–
   - é‡å­åŒ–ãƒ†ãƒ¼ãƒ–ãƒ«æ”¹å–„

2. **å°‚ç”¨å‰å‡¦ç†**:
   - H.264/H.265ãƒ‡ã‚³ãƒ¼ãƒ€é€£æº
   - JPEGãƒ­ã‚¹ãƒ¬ã‚¹å¤‰æ›
   - MP3ãƒ•ãƒ¬ãƒ¼ãƒ è§£æ

3. **ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æœ€é©åŒ–**:
   - GPUä¸¦åˆ—å‡¦ç†
   - SIMDå‘½ä»¤æ´»ç”¨
   - ãƒ¡ãƒ¢ãƒªå¸¯åŸŸæœ€é©åŒ–

#### é€Ÿåº¦æ”¹å–„
1. **ä¸¦åˆ—åŒ–å¼·åŒ–**: 
   - ã‚ˆã‚Šç´°ã‹ã„åˆ†å‰²å‡¦ç†
   - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†
   - éåŒæœŸI/O

2. **ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æœ€é©åŒ–**:
   - ã‚«ã‚¹ã‚¿ãƒ LZMAå®Ÿè£…
   - é«˜é€Ÿè¾æ›¸æ§‹ç¯‰
   - é©å¿œçš„ãƒãƒ•ãƒãƒ³

### é•·æœŸç›®æ¨™

#### é©æ–°çš„æŠ€è¡“
1. **æ©Ÿæ¢°å­¦ç¿’åœ§ç¸®**: 
   - å­¦ç¿’å‹äºˆæ¸¬å™¨
   - é©å¿œçš„ãƒ¢ãƒ‡ãƒ«é¸æŠ
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å­¦ç¿’

2. **é‡å­åœ§ç¸®**:
   - é‡å­ã‚‚ã¤ã‚Œæ´»ç”¨
   - é‡å­ä¸¦åˆ—æ€§åˆ©ç”¨
   - é‡å­èª¤ã‚Šè¨‚æ­£

## ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### æ€§èƒ½æ¸¬å®š
```python
def benchmark_compression():
    for file_type in ['text', 'video', 'image', 'audio']:
        for file_size in ['small', 'medium', 'large']:
            measure_performance(file_type, file_size)
```

### å“è³ªä¿è¨¼
- **å®Œå…¨å¯é€†æ€§**: 100%ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§
- **ã‚¨ãƒ©ãƒ¼è€æ€§**: ç ´æãƒ‡ãƒ¼ã‚¿å¾©æ—§
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æš—å·åŒ–å¼·åº¦æ¤œè¨¼

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. AV1 Specification (Alliance for Open Media)
2. SRLA Audio Codec Documentation  
3. AVIF Image Format Specification
4. LZMA SDK Documentation
5. Structure-Preserving Encryption Papers

---

*æœ€çµ‚æ›´æ–°: 2024å¹´12æœˆ27æ—¥*
